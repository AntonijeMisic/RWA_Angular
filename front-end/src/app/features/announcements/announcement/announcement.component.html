<div class="profile-wrapper">

  <h2 *ngIf="!announcementNotFound() && !isLoading()">
    {{ route.snapshot.paramMap.get('id')
        ? (isAdmin() ? 'Edit Announcement' : announcementForm.get('title')?.value)
        : 'Create Announcement' }}
  </h2>
  <h2 *ngIf="announcementNotFound()">Announcement Not Found</h2>

  <form *ngIf="!announcementNotFound() && !isLoading() && isAdmin()"
        [formGroup]="announcementForm"
        (ngSubmit)="saveAnnouncement()"
        class="profile-form">
    <div class="form-row">
      <label for="title">Title</label>
      <input id="title" formControlName="title" type="text"/>
      <div class="error" *ngIf="announcementForm.get('title')?.invalid && announcementForm.get('title')?.touched">
        Title is required (max 200 chars)
      </div>
    </div>

    <div class="form-row">
      <label for="message">Message</label>
      <textarea id="message" formControlName="message" rows="4"></textarea>
      <div class="error" *ngIf="announcementForm.get('message')?.invalid && announcementForm.get('message')?.touched">
        Message is required
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn save-btn">Save Announcement</button>
    </div>
  </form>

  <div *ngIf="!announcementNotFound() && !isLoading() && !isAdmin()" class="announcement-view">
    <div [innerHTML]="announcementForm.get('message')?.value"></div>
  </div>

</div>
